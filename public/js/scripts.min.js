!function(e){"use strict";e.MTALeadGenPopup=function(t){this.element=t instanceof e?t:e(t),this.leadgen_timer=t.data("leadgen-timer"),this.leadgen_trigger=t.data("leadgen-trigger"),this.local_storage_key=t.data("page-name"),this.local_storage=JSON.parse(localStorage.getItem(this.local_storage_key)),this.dismissed_time=null!==this.local_storage&&"undefined"!=typeof this.local_storage.dismissedTime?this.local_storage.dismissedTime:0},e.MTALeadGenPopup.prototype={init:function(){function t(e){i.triggerPopup("Lead Generation - Page Exit Popup")}function a(){i.triggerPopup("Lead Generation - Page Timer Popup: "+i.leadgen_timer/1e3+"s")}var i=this;switch(this.leadgen_trigger){case"exit":e(document).on("mouseleave",t);break;case"timer":setTimeout(function(){a()},this.leadgen_timer);break;case"exit-and-timer":setTimeout(function(){a()},this.leadgen_timer),e(document).on("mouseleave",t)}e("body").on("click",".close-mta-leadgenpopup",function(t){t.preventDefault();var a=e(this).data("leadgenclose"),s={pageName:a,dismissedTime:(new Date).getTime()};localStorage.setItem(a,JSON.stringify(s)),i.triggerAnalyticsEvent("Lead Generation Popup","Lead Generation - Dismiss Popup",i.local_storage_key,1),i.reset(),e("body").removeClass("show-leadgenpopup")})},reset:function(){this.local_storage=JSON.parse(localStorage.getItem(this.local_storage_key)),this.dismissed_time="undefined"!=typeof this.local_storage.dismissedTime?this.local_storage.dismissedTime:0},triggerPopup:function(t){var a=252e5;(new Date).getTime()-this.dismissed_time>a&&!e("body").hasClass("show-leadgenpopup")&&(e("body").hasClass("show-leadgenpopup")||this.triggerAnalyticsEvent("Lead Generation Popup",t,this.local_storage_key,1),e("body").addClass("show-leadgenpopup"))},triggerAnalyticsEvent:function(e,t,a,i){try{ga("send","event",e,t,a,i)}catch(e){console.log(e)}}},e(function(){if(e("#mta_leadgenpopup_wrapper").length){var t=new e.MTALeadGenPopup(e("#mta_leadgenpopup_wrapper"));t.init()}})}(jQuery);